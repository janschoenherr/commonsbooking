!function(w){"use strict";w(function(){function _(){var t=w("#"+b+"_repeat");t.on("cmb2_add_row cmb2_remove_row cmb2_shift_rows_complete",function(){_()});for(let e=0;e<t.children().length-1;e++){var n=w("#"+g+e);let o=n.find("#"+b+"_"+e+"_rule-type"),c=n.find('[class*="rule-description"]').find(".cmb2-metabox-description"),a=n.find('[class*="rule-param1"]');var i=a.find(".cmb2-text-small");let r=w(i.labels()[0]),s=a.find(".cmb2-metabox-description"),l=n.find('[class*="rule-param2"]');i=l.find(".cmb2-text-small");let m=w(i.labels()[0]),p=l.find(".cmb2-metabox-description"),u=n.find('[class*="rule-select-param"]'),d=u.find(".cmb2-metabox-description"),f=u.find(".cmb2_select");o.change(function(){_()});const h=w("option:selected",o).val();cb_booking_rules.forEach(t=>{if(t.name==h){if(c.text(t.description),o.width(300),t.hasOwnProperty("params")&&0<t.params.length)switch(t.params.length){case 1:a.show(),l.hide(),r.text(t.params[0].title),s.text(t.params[0].description),l.val("");break;case 2:a.show(),l.show(),r.text(t.params[0].title),s.text(t.params[0].description),m.text(t.params[1].title),p.text(t.params[1].description)}else a.hide(),a.val(""),l.hide(),l.val("");if(t.hasOwnProperty("selectParam")&&0<t.selectParam.length){u.show(),d.text(t.selectParam[0]);var e,n=t.selectParam[1];for(e in f.empty(),n)f.append(w("<option>",{value:e,text:n[e]}));f.width(150);var i=cb_applied_booking_rules.filter(e=>e.name==t.name);1===i.length&&f.val(i[0].appliedSelectParam)}else u.hide()}})}}function o(){var t=w("#"+b+"_repeat");t.on("cmb2_add_row cmb2_remove_row cmb2_shift_rows_complete",function(){o()});for(let e=0;e<t.children().length-1;e++){var n=w("#"+g+e),i=n.find('[class*="rule-applies-all"]').find(".cmb2-option"),n=n.find('[class*="rule-applies-categories"]');i.change(function(){o()}),i.prop("checked")?n.hide():n.show()}}const b="rules_group",g="cmb-group-rules_group-";_(),o()})}(jQuery),function(l){"use strict";l(function(){function e(e){l.each(e,function(){l(this).parents(".cmb-row").hide()})}function t(e){l.each(e,function(){l(this).parents(".cmb-row").show()})}function n(){(r.prop("checked")?t:e)(s)}function i(){a.prop("checked")?(t(r),n()):(e(r),e(s))}function o(){c.prop("checked")?(e(a),e(r),e(s)):(t(a),t(r),n())}const c=l("#_cb_use_global_settings"),a=l("#_cb_allow_lockdays_in_range"),r=l("#_cb_count_lockdays_in_range"),s=l("#_cb_count_lockdays_maximum");n(),r.change(function(){n()}),i(),a.change(function(){i()});o(),c.change(function(){o()})})}(jQuery),function(i){"use strict";i(function(){i("#cmb2-metabox-migration #migration-start").on("click",function(e){e.preventDefault(),i("#migration-state").show(),i("#migration-in-progress").show();const t=e=>{i.post(cb_ajax_start_migration.ajax_url,{_ajax_nonce:cb_ajax_start_migration.nonce,action:"cb_start_migration",data:e,geodata:i("#get-geo-locations").is(":checked")},function(e){let n=!0;i.each(e,function(e,t){i("#"+e+"-index").text(t.index),i("#"+e+"-count").text(t.count),"0"==t.complete&&(n=!1)}),n?(i("#migration-in-progress").hide(),i("#migration-done").show()):t(e)})};t(!1)}),i("#cmb2-metabox-migration #booking-update-start").on("click",function(e){e.preventDefault(),i("#booking-migration-in-progress").show(),i.post(cb_ajax_start_migration.ajax_url,{_ajax_nonce:cb_ajax_start_migration.nonce,action:"cb_start_booking_migration"}).done(function(){i("#booking-migration-in-progress").hide(),i("#booking-migration-done").show()}).fail(function(){i("#booking-migration-in-progress").hide(),i("#booking-migration-failed").show()})})})}(jQuery),function(t){"use strict";t(function(){const e=t("input[name=post_type][value=cb_restriction]").parent("form");e.find("input, select, textarea").on("keyup change paste",function(){e.find("input[name=restriction-send]").prop("disabled",!0)})})}(jQuery),function(i){"use strict";i(function(){if(i("#templates").length){const t=i("#emailtemplates_mail-booking_ics_attach");const n=[i("#emailtemplates_mail-booking_ics_event-title"),i("#emailtemplates_mail-booking_ics_event-description")],e=function(){var e;e=n,i.each(e,function(){i(this).parents(".cmb-row").show()}),t.prop("checked")||(e=n,i.each(e,function(){i(this).parents(".cmb-row").hide()}),t.prop("checked",!1))};e(),t.click(function(){e()})}})}(jQuery),function(S){"use strict";S(function(){const t=function(t,e){var n=[];return jQuery.grep(e,function(e){-1==jQuery.inArray(e,t)&&n.push(e)}),n},i=function(e){S.each(e,function(){S(this).parents(".cmb-row").hide()})},o=function(e){S.each(e,function(){S(this).parents(".cmb-row").show()})};if(S("#cmb2-metabox-cb_timeframe-custom-fields").length){const d=S("#timeframe-repetition"),f=S("#type"),h=S("#grid"),_=S("#weekdays1");var e=S("#start-time"),n=S("#end-time"),c=S("#title-timeframe-rep-config");const b=S("#repetition-start"),g=S("#repetition-end"),w=S("#full-day"),k=S("#show-booking-codes"),v=S("#create-booking-codes");var a=S("#booking-codes-download"),r=S("#booking-codes-list"),s=S(".cmb2-id-title-bookings-config"),l=S(".cmb2-id-timeframe-max-days"),m=S(".cmb2-id-timeframe-advance-booking-days"),p=S(".cmb2-id-booking-startday-offset"),u=S(".cmb2-id-allowed-user-roles");const x=[c,w,e,n,_,b,g,h],y=[w,e,n,h,b,g],j=[h,e,n],Q=[v,r,a,k],P=[s,l,m,p,u],D=function(){2==S("option:selected",f).val()?S.each(P,function(){S(this).show()}):S.each(P,function(){S(this).hide()})},O=(D(),f.change(function(){D()}),function(){S("option:selected",d).val();(w.prop("checked")?(h.prop("selected",!1),h.val(0),i):o)(j)}),A=(O(),w.change(function(){O()}),function(){var e=S("option:selected",d).val();e?("norep"==e?(o(y),i(t(y,x))):(o(x),i(t(x,y))),"w"==e?_.parents(".cmb-row").show():(_.parents(".cmb-row").hide(),e=S("input[name*=weekdays]"),S.each(e,function(){S(this).prop("checked",!1)})),O()):(i(y),i(x))}),E=(A(),d.change(function(){A()}),function(){var e=w.prop("checked"),t=f.val(),n=b.val();g.val();i(Q),n&&e&&2==t&&(o(Q),v.prop("checked")||(i([k]),k.prop("checked",!1)))});E();c=[b,g,w,f,v];S.each(c,function(e,t){t.change(function(){E()})})}})}(jQuery),function(e){"use strict";e(function(){e(document).tooltip()})}(jQuery);