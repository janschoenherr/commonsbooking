"use strict";function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _createForOfIteratorHelper(e,t){var a,n,o,i,r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(r)return n=!(a=!0),{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){n=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(n)throw o}}};if(Array.isArray(e)||(r=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length)return r&&(e=r),i=0,{s:t=function(){},n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){var a;if(e)return"string"==typeof e?_arrayLikeToArray(e,t):"Map"===(a="Object"===(a=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:a)||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?_arrayLikeToArray(e,t):void 0}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}Object.defineProperty(exports,"__esModule",{value:!0}),exports.addTranslation=addTranslation,exports.getHolidayByDate=getHolidayByDate,exports.getHolidays=getHolidays,exports.getLanguage=getLanguage,exports.isHoliday=isHoliday,exports.isSpecificHoliday=isSpecificHoliday,exports.isSunOrHoliday=isSunOrHoliday,exports.setLanguage=setLanguage;var germanTranslations={NEUJAHRSTAG:"Neujahrstag",HEILIGEDREIKOENIGE:"Heilige Drei Könige",KARFREITAG:"Karfreitag",OSTERSONNTAG:"Ostersonntag",OSTERMONTAG:"Ostermontag",TAG_DER_ARBEIT:"Tag der Arbeit",CHRISTIHIMMELFAHRT:"Christi Himmelfahrt",PFINGSTSONNTAG:"Pfingstsonntag",PFINGSTMONTAG:"Pfingstmontag",FRONLEICHNAM:"Fronleichnam",MARIAHIMMELFAHRT:"Mariä Himmelfahrt",DEUTSCHEEINHEIT:"Tag der Deutschen Einheit",REFORMATIONSTAG:"Reformationstag",ALLERHEILIGEN:"Allerheiligen",BUBETAG:"Buß- und Bettag",ERSTERWEIHNACHTSFEIERTAG:"1. Weihnachtstag",ZWEITERWEIHNACHTSFEIERTAG:"2. Weihnachtstag",WELTKINDERTAG:"Weltkindertag",WELTFRAUENTAG:"Weltfrauentag",AUGSBURGER_FRIEDENSFEST:"Augsburger Friedensfest"},allHolidays=["NEUJAHRSTAG","HEILIGEDREIKOENIGE","KARFREITAG","OSTERSONNTAG","OSTERMONTAG","TAG_DER_ARBEIT","CHRISTIHIMMELFAHRT","MARIAHIMMELFAHRT","PFINGSTSONNTAG","PFINGSTMONTAG","FRONLEICHNAM","DEUTSCHEEINHEIT","REFORMATIONSTAG","ALLERHEILIGEN","BUBETAG","ERSTERWEIHNACHTSFEIERTAG","ZWEITERWEIHNACHTSFEIERTAG","WELTKINDERTAG","WELTFRAUENTAG","AUGSBURGER_FRIEDENSFEST"],allRegions=["BW","BY","BE","BB","HB","HE","HH","MV","NI","NW","RP","SL","SN","ST","SH","TH","BUND","AUGSBURG","ALL"],defaultLanguage="de",currentLanguage=defaultLanguage,translations={de:germanTranslations};function addTranslation(e,t){var a,e=e.toLowerCase(),n=translations[defaultLanguage],o=!1,i=_createForOfIteratorHelper(allHolidays);try{for(i.s();!(a=i.n()).done;){var r=a.value;t[r]||(o=!0,t[r]=n[r])}}catch(e){i.e(e)}finally{i.f()}o&&console.warn("[feiertagejs] addTranslation: you did not add all holidays in your translation! Took German as fallback"),translations[e]=t}function setLanguage(e){var t=e.toLowerCase();if(!translations[t])throw new TypeError("[feiertagejs] tried to set language to ".concat(t," but the translation is missing. Please use addTranslation(isoCode,object) first"));currentLanguage=e}function getLanguage(){return currentLanguage}function isSunOrHoliday(e,t){return checkRegion(t),0===e.getDay()||isHoliday(e,t)}function isHoliday(e,t){checkRegion(t);var a=e.getFullYear(),e=toUtcTimestamp(e);return-1!==getHolidaysAsUtcTimestamps(a,t).indexOf(e)}function getHolidayByDate(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"ALL";return checkRegion(e),getHolidaysOfYear(t.getFullYear(),e).find(function(e){return e.equals(t)})}function checkRegion(e){if(null==e)throw new Error("Region must not be undefined or null");if(-1===allRegions.indexOf(e))throw new Error("Invalid region: ".concat(e,"! Must be one of ").concat(allRegions.toString()))}function checkHolidayType(e){if(null==e)throw new TypeError("holidayName must not be null or undefined");if(-1===allHolidays.indexOf(e))throw new Error('feiertage.js: invalid holiday type "'.concat(e,'"! Must be one of ').concat(allHolidays.toString()))}function isSpecificHoliday(t,e){var a=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"ALL";checkRegion(a),checkHolidayType(e);a=getHolidaysOfYear(t.getFullYear(),a).find(function(e){return e.equals(t)});return!!a&&a.name===e}function getHolidays(e,t){e="string"==typeof e?parseInt(e,10):e;return checkRegion(t),getHolidaysOfYear(e,t)}function getHolidaysAsUtcTimestamps(e,t){return getHolidaysOfYear(e,t).map(function(e){return toUtcTimestamp(e.date)})}function getHolidaysOfYear(e,t){var a=getEasterDate(e),n=addDays(new Date(a.getTime()),-2),o=addDays(new Date(a.getTime()),1),i=addDays(new Date(a.getTime()),39),r=addDays(new Date(a.getTime()),49),l=addDays(new Date(a.getTime()),50),n=[].concat(_toConsumableArray(getCommonHolidays(e)),[newHoliday("KARFREITAG",n),newHoliday("OSTERMONTAG",o),newHoliday("CHRISTIHIMMELFAHRT",i),newHoliday("PFINGSTMONTAG",l)]);return addHeiligeDreiKoenige(e,t,n),addEasterAndPfingsten(e,t,a,r,n),addFronleichnam(t,a,n),addMariaeHimmelfahrt(e,t,n),addReformationstag(e,t,n),addAllerheiligen(e,t,n),addBussUndBetttag(e,t,n),addWeltkindertag(e,t,n),addWeltfrauenTag(e,t,n),addRegionalHolidays(e,t,n),n.sort(function(e,t){return e.date.getTime()-t.date.getTime()})}function getCommonHolidays(e){return[newHoliday("NEUJAHRSTAG",makeDate(e,1,1)),newHoliday("TAG_DER_ARBEIT",makeDate(e,5,1)),newHoliday("DEUTSCHEEINHEIT",makeDate(e,10,3)),newHoliday("ERSTERWEIHNACHTSFEIERTAG",makeDate(e,12,25)),newHoliday("ZWEITERWEIHNACHTSFEIERTAG",makeDate(e,12,26))]}function addRegionalHolidays(e,t,a){"AUGSBURG"===t&&a.push(newHoliday("AUGSBURGER_FRIEDENSFEST",makeDate(e,8,8)))}function addHeiligeDreiKoenige(e,t,a){"BW"!==t&&"BY"!==t&&"AUGSBURG"!==t&&"ST"!==t&&"ALL"!==t||a.push(newHoliday("HEILIGEDREIKOENIGE",makeDate(e,1,6)))}function addEasterAndPfingsten(e,t,a,n,o){"BB"!==t&&"ALL"!==t||o.push(newHoliday("OSTERSONNTAG",a),newHoliday("PFINGSTSONNTAG",n))}function addFronleichnam(e,t,a){"BW"!==e&&"BY"!==e&&"AUGSBURG"!==e&&"HE"!==e&&"NW"!==e&&"RP"!==e&&"SL"!==e&&"ALL"!==e||(e=addDays(new Date(t.getTime()),60),a.push(newHoliday("FRONLEICHNAM",e)))}function addMariaeHimmelfahrt(e,t,a){"SL"!==t&&"BY"!==t&&"AUGSBURG"!==t&&"ALL"!==t||a.push(newHoliday("MARIAHIMMELFAHRT",makeDate(e,8,15)))}function addReformationstag(e,t,a){2017!==e&&"NI"!==t&&"BB"!==t&&"HB"!==t&&"HH"!==t&&"MV"!==t&&"SN"!==t&&"ST"!==t&&"TH"!==t&&"SH"!==t&&"ALL"!==t||a.push(newHoliday("REFORMATIONSTAG",makeDate(e,10,31)))}function addAllerheiligen(e,t,a){"BW"!==t&&"BY"!==t&&"AUGSBURG"!==t&&"NW"!==t&&"RP"!==t&&"SL"!==t&&"ALL"!==t||a.push(newHoliday("ALLERHEILIGEN",makeDate(e,11,1)))}function addBussUndBetttag(e,t,a){"SN"!==t&&"ALL"!==t||(t=getBussBettag(e),a.push(newHoliday("BUBETAG",makeDate(t.getUTCFullYear(),t.getUTCMonth()+1,t.getUTCDate()))))}function addWeltkindertag(e,t,a){2019<=e&&("TH"===t||"ALL"===t)&&a.push(newHoliday("WELTKINDERTAG",makeDate(e,9,20)))}function addWeltfrauenTag(e,t,a){e<=2018||("BE"!==t&&"ALL"!==t||a.push(newHoliday("WELTFRAUENTAG",makeDate(e,3,8))),"MV"===t&&2023<=e&&a.push(newHoliday("WELTFRAUENTAG",makeDate(e,3,8))))}function getEasterDate(e){var t=Math.floor(e/100),a=e-19*Math.floor(e/19),n=Math.floor((t-17)/25),n=t-Math.floor(t/4)-Math.floor((t-n)/3)+19*a+15,a=(n=(n-=30*Math.floor(n/30))-Math.floor(n/28)*(1-Math.floor(n/28)*Math.floor(29/(1+n))*Math.floor((21-a)/11)),e+Math.floor(e/4)+n+2-t+Math.floor(t/4)),t=n-(a-=7*Math.floor(a/7)),n=3+Math.floor((40+t)/44),a=28+t-31*Math.floor(n/4);return new Date(e,n-1,a)}function getBussBettag(e){var e=new Date(e,11,25,12,0,0),t=e.getDay()%7,t=(t=0===t?7:t)+32;return addDays(new Date(e.getTime()),-t)}function addDays(e,t){var a=new Date(e);return a.setDate(e.getDate()+t),a}function makeDate(e,t,a){return new Date(e,t-1,a)}function newHoliday(e,t){return{name:e,date:t,dateString:localeDateObjectToDateString(t),trans:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:currentLanguage;return console.warn('FeiertageJs: You are using "Holiday.trans() method. This will be replaced in the next major version with translate()"'),this.translate(e)},translate:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:currentLanguage;return null==e?void 0:translations[e][this.name]},getNormalizedDate:function(){return toUtcTimestamp(this.date)},equals:function(e){e=localeDateObjectToDateString(e);return this.dateString===e}}}function localeDateObjectToDateString(e){e=new Date(e.getTime()-60*e.getTimezoneOffset()*1e3);return e.setUTCHours(0,0,0,0),e.toISOString().slice(0,10)}function toUtcTimestamp(e){e=new Date(e);return e.setHours(0,0,0,0),e.getTime()}!function(a){a(function(){a("#holiday_load_btn").length&&a("#holiday_load_btn").click(function(){var e,t;e=a("#_cmb2_holidayholiday_year").val(),t=a("#_cmb2_holidayholiday_state").val(),a.post(cb_ajax_holiday_get.ajax_url,{_ajax_nonce:cb_ajax_holiday_get.nonce,action:"holiday_get",year:e,state:t},function(e){e=a.parseJSON(e),e=Object.entries(e).map(e=>e[1]);0<a("#timeframe_manual_date").val().length?(","!==a("#timeframe_manual_date").val().slice(-1)&&a("#timeframe_manual_date").val(a("#timeframe_manual_date").val()+","+e.join(",")),a("#timeframe_manual_date").val(a("#timeframe_manual_date").val()+e.join(","))):a("#timeframe_manual_date").val(e.join(",")+",")})})})}(jQuery),function(n){n(function(){n("#cmb2-metabox-migration #migration-start").on("click",function(e){e.preventDefault(),n("#migration-state").show(),n("#migration-in-progress").show();const t=e=>{n.post(cb_ajax_start_migration.ajax_url,{_ajax_nonce:cb_ajax_start_migration.nonce,action:"cb_start_migration",data:e,geodata:n("#get-geo-locations").is(":checked")},function(e){let a=!0;n.each(e,function(e,t){n("#"+e+"-index").text(t.index),n("#"+e+"-count").text(t.count),"0"==t.complete&&(a=!1)}),a?(n("#migration-in-progress").hide(),n("#migration-done").show()):t(e)})};t(!1)}),n("#cmb2-metabox-migration #booking-update-start").on("click",function(e){e.preventDefault(),n("#booking-migration-in-progress").show(),n.post(cb_ajax_start_migration.ajax_url,{_ajax_nonce:cb_ajax_start_migration.nonce,action:"cb_start_booking_migration"}).done(function(){n("#booking-migration-in-progress").hide(),n("#booking-migration-done").show()}).fail(function(){n("#booking-migration-in-progress").hide(),n("#booking-migration-failed").show()})})})}(jQuery),function(t){t(function(){const e=t("input[name=post_type][value=cb_restriction]").parent("form");e.find("input, select, textarea").on("keyup change paste",function(){e.find("input[name=restriction-send]").prop("disabled",!0)})})}(jQuery),function(n){n(function(){if(n("#templates").length){const t=n("#emailtemplates_mail-booking_ics_attach");const a=[n("#emailtemplates_mail-booking_ics_event-title"),n("#emailtemplates_mail-booking_ics_event-description")],e=function(){var e;e=a,n.each(e,function(){n(this).parents(".cmb-row").show()}),t.prop("checked")||(e=a,n.each(e,function(){n(this).parents(".cmb-row").hide()}),t.prop("checked",!1))};e(),t.click(function(){e()})}})}(jQuery),function(O){O(function(){const t=function(t,e){var a=[];return jQuery.grep(e,function(e){-1==jQuery.inArray(e,t)&&a.push(e)}),a},o=function(e){O.each(e,function(){O(this).parents(".cmb-row").hide()})},i=function(e){O.each(e,function(){O(this).parents(".cmb-row").show()})};if(O("#cmb2-metabox-cb_timeframe-custom-fields").length){const c=O("#timeframe-repetition"),d=O("#type"),u=O("#grid"),g=O("#weekdays1");var e=O("#start-time"),a=O("#end-time"),n=O("#title-timeframe-rep-config");const f=O("#repetition-start"),m=O("#repetition-end"),h=O("#full-day"),y=O("#title-timeframe-booking-codes"),T=O("#show-booking-codes"),E=O("#create-booking-codes");var r=O("#booking-codes-download"),l=O("#booking-codes-list");const A=O(".cmb2-id--cmb2-holiday"),p=O("#timeframe_manual_date");var s=O("#holiday_load_btn");const H=O(".cmb2-id-timeframe-manual-date"),R=O(".cmb2-id-timeframe-max-days"),_=O(".cmb2-id-timeframe-advance-booking-days"),I=O(".cmb2-id-allowed-user-roles"),S=[n,h,e,a,g,f,m,u],b=[h,e,a,u,f,m],w=[u,e,a],D=[E,l,r,T],L=function(){var e=O("option:selected",d).val();O("option:selected",c).val();(2==e?(R.show(),_.show(),I.show(),i):(R.hide(),_.hide(),I.hide(),o))(y)},G=(L(),d.change(function(){L()}),function(){var e=O("option:selected",c).val(),t=O("option:selected",d).val();"manual"!==e?(H.hide(),A.hide(),p.val("")):(H.show(),3==t?A.show():(A.hide(),p.val("")))}),N=(G(),c.change(function(){G()}),function(){O("option:selected",c).val();(h.prop("checked")?(u.prop("selected",!1),o):i)(w)}),v=(N(),h.change(function(){N()}),function(){var e=O("option:selected",c).val();O("option:selected",d).val();e?("norep"==e?(i(b),o(t(b,S))):(i(S),o(t(S,b))),("manual"==e?(H.show(),o(f),o):(H.hide(),i(f),i))(m),"w"==e?g.parents(".cmb-row").show():(g.parents(".cmb-row").hide(),e=O("input[name*=weekdays]"),O.each(e,function(){O(this).prop("checked",!1)})),N()):(o(b),o(S))}),k=(v(),c.change(function(){v()}),function(){var e=h.prop("checked"),t=d.val(),a=f.val(),n=m.val();o(D),a&&n&&e&&2==t&&(i(D),E.prop("checked")||(o([T]),T.prop("checked",!1)))});k();n=[f,m,h,d,E];O.each(n,function(e,t){t.change(function(){k()})});s.click(function(){var e;e=new Date,console.log(isHoliday(e,"BW"))})}})}(jQuery),function(e){e(function(){e(document).tooltip()})}(jQuery);