!function(w){"use strict";w(function(){function a(){var t=w("#"+g+"_repeat");t.on("cmb2_add_row cmb2_remove_row cmb2_shift_rows_complete",function(){a()});for(let e=0;e<t.children().length-1;e++){var n=w("#"+_+e),i=n.find("#"+g+"_"+e+"_rule-type");let c=n.find('[class*="rule-description"]').find(".cmb2-metabox-description"),r=n.find('[class*="rule-param1"]');var o=r.find(".cmb2-text-small");let s=w(o.labels()[0]),l=r.find(".cmb2-metabox-description"),m=n.find('[class*="rule-param2"]');o=m.find(".cmb2-text-small");let p=w(o.labels()[0]),d=m.find(".cmb2-metabox-description"),u=n.find('[class*="rule-select-param"]'),f=u.find(".cmb2-metabox-description"),h=u.find(".cmb2_select");i.change(function(){a()});const b=w("option:selected",i).val();cb_booking_rules.forEach(t=>{if(t.name==b){if(c.text(t.description),t.hasOwnProperty("params")&&0<t.params.length)switch(t.params.length){case 1:r.show(),m.hide(),s.text(t.params[0].title),l.text(t.params[0].description),m.val("");break;case 2:r.show(),m.show(),s.text(t.params[0].title),l.text(t.params[0].description),p.text(t.params[1].title),d.text(t.params[1].description)}else r.hide(),r.val(""),m.hide(),m.val("");if(t.hasOwnProperty("selectParam")&&0<t.selectParam.length){u.show(),f.text(t.selectParam[0]);var e,n=t.selectParam[1],i=(h.empty(),0);for(e in n){h.append(w("<option>",{value:e,text:n[e]}));var o=w(this).text().length;i<o&&(i=o)}h.width(Math.max(10*i,150));var a=cb_applied_booking_rules.filter(e=>e.name==t.name);1===a.length&&h.val(a[0].appliedSelectParam)}else u.hide()}})}}function o(){var t=w("#"+g+"_repeat");t.on("cmb2_add_row cmb2_remove_row cmb2_shift_rows_complete",function(){o()});for(let e=0;e<t.children().length-1;e++){var n=w("#"+_+e),i=n.find('[class*="rule-applies-all"]').find(".cmb2-option"),n=n.find('[class*="rule-applies-categories"]');i.change(function(){o()}),i.prop("checked")?n.hide():n.show()}}const g="rules_group",_="cmb-group-rules_group-";a(),o()})}(jQuery),function(i){"use strict";i(function(){i("#cmb2-metabox-migration #migration-start").on("click",function(e){e.preventDefault(),i("#migration-state").show(),i("#migration-in-progress").show();const t=e=>{i.post(cb_ajax_start_migration.ajax_url,{_ajax_nonce:cb_ajax_start_migration.nonce,action:"cb_start_migration",data:e,geodata:i("#get-geo-locations").is(":checked")},function(e){let n=!0;i.each(e,function(e,t){i("#"+e+"-index").text(t.index),i("#"+e+"-count").text(t.count),"0"==t.complete&&(n=!1)}),n?(i("#migration-in-progress").hide(),i("#migration-done").show()):t(e)})};t(!1)}),i("#cmb2-metabox-migration #booking-update-start").on("click",function(e){e.preventDefault(),i("#booking-migration-in-progress").show(),i.post(cb_ajax_start_migration.ajax_url,{_ajax_nonce:cb_ajax_start_migration.nonce,action:"cb_start_booking_migration"}).done(function(){i("#booking-migration-in-progress").hide(),i("#booking-migration-done").show()}).fail(function(){i("#booking-migration-in-progress").hide(),i("#booking-migration-failed").show()})})})}(jQuery),function(t){"use strict";t(function(){const e=t("input[name=post_type][value=cb_restriction]").parent("form");e.find("input, select, textarea").on("keyup change paste",function(){e.find("input[name=restriction-send]").prop("disabled",!0)})})}(jQuery),function(i){"use strict";i(function(){if(i("#templates").length){const t=i("#emailtemplates_mail-booking_ics_attach");const n=[i("#emailtemplates_mail-booking_ics_event-title"),i("#emailtemplates_mail-booking_ics_event-description")],e=function(){var e;e=n,i.each(e,function(){i(this).parents(".cmb-row").show()}),t.prop("checked")||(e=n,i.each(e,function(){i(this).parents(".cmb-row").hide()}),t.prop("checked",!1))};e(),t.click(function(){e()})}})}(jQuery),function(O){"use strict";O(function(){const t=function(t,e){var n=[];return jQuery.grep(e,function(e){-1==jQuery.inArray(e,t)&&n.push(e)}),n},i=function(e){O.each(e,function(){O(this).parents(".cmb-row").hide()})},o=function(e){O.each(e,function(){O(this).parents(".cmb-row").show()})};if(O("#cmb2-metabox-cb_timeframe-custom-fields").length){const s=O("#timeframe-repetition"),l=O("#type"),m=O("#grid"),p=O("#weekdays1");var e=O("#start-time"),n=O("#end-time"),a=O("#title-timeframe-rep-config");const d=O("#repetition-start"),u=O("#repetition-end"),f=O("#full-day"),h=O("#show-booking-codes"),b=O("#create-booking-codes");var c=O("#booking-codes-download"),r=O("#booking-codes-list");O(".cmb2-id-title-bookings-config");const g=O(".cmb2-id-timeframe-max-days"),_=O(".cmb2-id-timeframe-advance-booking-days");O(".cmb2-id-booking-startday-offset");const w=O(".cmb2-id-allowed-user-roles"),k=[a,f,e,n,p,d,u,m],v=[f,e,n,m,d,u],x=[m,e,n],y=[b,r,c,h],j=function(){2==O("option:selected",l).val()?(g.show(),_.show(),w.show()):(g.hide(),_.hide(),w.hide())},Q=(j(),l.change(function(){j()}),function(){O("option:selected",s).val();(f.prop("checked")?(m.prop("selected",!1),i):o)(x)}),P=(Q(),f.change(function(){Q()}),function(){var e=O("option:selected",s).val();e?("norep"==e?(o(v),i(t(v,k))):(o(k),i(t(k,v))),"w"==e?p.parents(".cmb-row").show():(p.parents(".cmb-row").hide(),e=O("input[name*=weekdays]"),O.each(e,function(){O(this).prop("checked",!1)})),Q()):(i(v),i(k))}),D=(P(),s.change(function(){P()}),function(){var e=f.prop("checked"),t=l.val(),n=d.val();u.val();i(y),n&&e&&2==t&&(o(y),b.prop("checked")||(i([h]),h.prop("checked",!1)))});D();a=[d,u,f,l,b];O.each(a,function(e,t){t.change(function(){D()})})}})}(jQuery),function(e){"use strict";e(function(){e(document).tooltip()})}(jQuery);